Object subclass: #Buscaminas	instanceVariableNames: ''	classVariableNames: 'partida tablero ventana'	package: 'Buscaminas'!!Buscaminas methodsFor: 'initialization' stamp: 'LautaroFaccini 11/14/2023 19:28'!initialize partida:= Partida new.tablero:= Tablero new .tablero dificultad:partida dificultad.ventana:=tablero crearTablero openInHand openInWindow setLabel:'Buscaminas'.! !SimpleSwitchMorph subclass: #Celda	instanceVariableNames: 'onClick tieneMina'	classVariableNames: ''	package: 'Buscaminas'!!Celda methodsFor: 'initialization' stamp: 'LautaroFaccini 11/15/2023 00:17'!initialize	super initialize. 	self label: ''. 	self borderWidth: 1.	bounds := 0@0 corner: 40@40 . "tamaño de la celda"	onColor := Color green .	offColor := Color transparent .	self turnOn.	tieneMina:= false.! !!Celda methodsFor: 'gameLogic' stamp: 'LautaroFaccini 11/15/2023 00:08'!ponerMinatieneMina:= true.offColor := Color red .! !!Celda methodsFor: 'accessing' stamp: 'LautaroFaccini 11/14/2023 19:00'!onClick: aBlock	onClick := aBlock! !!Celda methodsFor: 'accessing' stamp: 'LautaroFaccini 11/15/2023 00:16'!tieneMina	^tieneMina! !Object subclass: #Jugador	instanceVariableNames: 'nombre'	classVariableNames: ''	package: 'Buscaminas'!!Jugador methodsFor: 'initialization' stamp: 'LautaroFaccini 11/14/2023 16:05'!initialize |jugador|jugador=''.[jugador isNil or: jugador='']whileTrue:[ jugador:= (UIManager default request: 'Ingrese su nombre de jugador: ')].self nombre: jugador! !!Jugador methodsFor: 'accessing' stamp: 'LautaroFaccini 11/14/2023 15:45'!nombre	^ nombre! !!Jugador methodsFor: 'accessing' stamp: 'LautaroFaccini 11/14/2023 15:45'!nombre: unNombre	nombre := unNombre! !Object subclass: #Partida	instanceVariableNames: 'jugador dificultad dimension'	classVariableNames: ''	package: 'Buscaminas'!!Partida methodsFor: 'initialization' stamp: 'LautaroFaccini 11/14/2023 18:27'!initialize |opcion|opcion := nil.jugador:=Jugador new.[ opcion isNil  ]whileTrue:[opcion  := (UIManager default chooseFrom: #('Facil' 'Medio' 'Dificil') values: #(1 2 3) lines: #(1 2 3) message:'Seleccione la dificultad: ' title:'Buscaminas')].self dificultad: opcion.! !!Partida methodsFor: 'accessing' stamp: 'LautaroFaccini 11/14/2023 16:08'!dificultad: unaDificultad	dificultad := unaDificultad ! !!Partida methodsFor: 'accessing' stamp: 'LautaroFaccini 11/14/2023 16:10'!jugador	^ jugador! !!Partida methodsFor: 'accessing' stamp: 'LautaroFaccini 11/14/2023 16:08'!dificultad	^ dificultad! !BorderedMorph subclass: #Tablero	instanceVariableNames: 'dificultad tamaño cantMinas celdas minas'	classVariableNames: ''	package: 'Buscaminas'!!Tablero methodsFor: 'accessing' stamp: 'LautaroFaccini 11/14/2023 19:29'!dificultad: unaDificultad	dificultad:= unaDificultad.! !!Tablero methodsFor: 'accessing' stamp: 'LautaroFaccini 11/14/2023 21:54'!cantMinas	^cantMinas! !!Tablero methodsFor: 'accessing' stamp: 'LautaroFaccini 11/14/2023 19:29'!dificultad	^ dificultad! !!Tablero methodsFor: 'initialize' stamp: 'LautaroFaccini 11/15/2023 11:27'!crearTablero 	| lado plantillaCelda |	self useRoundedCorners.	(dificultad = 1) ifTrue: [ 		tamaño:= 8.		cantMinas:= 10		 ].	(dificultad = 2) ifTrue: [ 		tamaño:= 14.		cantMinas:= 40 		 ].	(dificultad = 3) ifTrue: [ 		tamaño:= 20.		cantMinas:= 99		 ].	plantillaCelda := Celda new.		lado:= plantillaCelda width.	self color: Color lightBrown .		self bounds: (400 @ 100 extent: (lado * tamaño) @ (lado * tamaño)+ (2* borderWidth) ).	celdas:= Array2D new: tamaño tabulate: [ :i :j | self  nuevaCelda: i at: j  ].	self mapearMinas: cantMinas.	! !!Tablero methodsFor: 'gameLogic' stamp: 'LautaroFaccini 11/14/2023 23:43'!verificar:i at:j	^'hola', i, ', ', j. ! !!Tablero methodsFor: 'gameLogic' stamp: 'LautaroFaccini 11/15/2023 11:29'!nuevaCelda: i at: j"Instanciamos una celda y le asignamos una posicion en nuestro arreglo "	| celda origen |	celda := Celda new.	origen := self innerBounds origin.	self addMorph: celda.	celda position: ((i - 1) * celda width) @ ((j - 1) * celda height) + origen.	celda onClick: [ self verificar: i at: j ].	^celda! !!Tablero methodsFor: 'gameLogic' stamp: 'LautaroFaccini 11/15/2023 00:14'!mapearMinas: unaCantidad| i j |	(unaCantidad > 1) ifTrue: [ 		self mapearMinas: (unaCantidad-1).		 ].			i:= (tamaño atRandom).			j:= (tamaño atRandom).			[((celdas at: i at: j) tieneMina)] whileTrue: [ 				i:= (tamaño atRandom).				j:= (tamaño atRandom).				 ].			(celdas at: i at: j) ponerMina.	! !